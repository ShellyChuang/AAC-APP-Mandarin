<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>AAC å¥å­å»ºæ§‹å™¨ v29.1 (Emoji)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* v28: å¥—ç”¨æ€æºé»‘é«” */
        html, body {
            height: 100%; width: 100%; margin: 0; padding: 0;
            overflow: hidden;
            font-family: 'Noto Sans TC', -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang TC", "Hiragino Sans GB", "Microsoft JhengHei", Roboto, Arial, sans-serif;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }
        
        /* v28: å½ˆçª— (Modal) */
        .modal-overlay {
            position: fixed; inset: 0;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(8px);
            display: flex; justify-content: center; align-items: center;
            z-index: 50;
        }
        .modal-content {
            background-color: white; padding: 1.5rem; border-radius: 1rem;
            width: calc(100% - 3rem); max-width: 400px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .modal-content h3 { font-size: 1.5rem; font-weight: 600; margin-bottom: 1.5rem; color: #111827; }
        
        /* v29: æŠ½å–å…±ç”¨ Modal Input æ¨£å¼ */
        .modal-input-style {
            width: 100%; font-size: 1.125rem; padding: 0.75rem 1rem;
            border: 1px solid #d1d5db; border-radius: 0.75rem; box-sizing: border-box;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        .modal-input-style:focus {
            outline: none; border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
        }
        
        /* --- v28: ä¸» App ä½ˆå±€ --- */
        .app-layout {
            display: grid;
            grid-template-rows: 1fr auto; /* [ä¸»è¦å…§å®¹] [åº•éƒ¨å°è¦½] */
            height: 100vh;
            height: -webkit-fill-available;
            box-sizing: border-box;
            background-color: #f9fafb; /* bg-gray-50 */
        }
        /* v28: ä¸»è¦å…§å®¹å€ (å¯æ»‘å‹•) */
        main#app-content {
            overflow-y: auto; /* é€™æ˜¯å”¯ä¸€çš„æ»‘å‹•å€ */
            -webkit-overflow-scrolling: touch;
            min-height: 0;
        }
        .quick-view, .builder-view, .settings-view {
            height: auto; /* è®“å…§å®¹æ’é–‹é«˜åº¦ï¼Œä½¿ main å¯ä»¥æ»‘å‹• */
        }
        
        /* v28: æŒ‰éˆ•åŸºåº•æ¨£å¼ (å¯¦è‰²æŒ‰éˆ•) */
        .btn {
            display: flex; justify-content: center; align-items: center; text-align: center;
            border: none; border-radius: 1rem; /* 16px */
            font-weight: 700; padding: 1rem; cursor: pointer; user-select: none;
            transition: all 0.1s ease;
            min-height: 5rem; color: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }
        .btn:active {
            transform: scale(0.97);
            filter: brightness(1.1);
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }
        
        /* v28: è©å½™ç¶²æ ¼ */
        .quick-word-grid, .builder-word-grid {
            display: grid; grid-template-columns: repeat(2, 1fr);
            gap: 1.25rem; /* 20px */
            padding: 1.25rem; /* 20px */
        }
        
        /* --- v28: æŒ‰éˆ•å¤§å° (ç”± JS æ§åˆ¶) --- */
        .quick-word-btn, .builder-word-btn {
            line-height: 1.3; /* v29.1: èª¿æ•´è¡Œé«˜ä»¥å®¹ç´ Emoji */
        }
        
        /* v28: çµ„åˆå¥å­æ¨¡å¼ */
        /* v28: å¥å­é¡¯ç¤ºå€ (ä¸å†é»æ€§ï¼Œæ”¹ç‚ºå…§å®¹çš„ç¬¬ä¸€éƒ¨åˆ†) */
        .sentence-display-container {
            background-color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            padding: 1.5rem;
        }
        .sentence-display {
            min-height: 10rem; font-size: 3rem; font-weight: 500;
            line-height: 3.5rem;
            display: flex; align-items: center; color: #111827;
            background-color: #f9fafb; /* bg-gray-50 */
            border-radius: 0.75rem;
            padding: 1.5rem;
            flex-wrap: wrap; /* v28: å…è¨±é›™èªè©å½™æ›è¡Œ */
        }
        /* v28: çµ„åˆå¥å­åŠŸèƒ½æŒ‰éˆ• (ç§»åˆ°å¥å­å€ä¸‹æ–¹) */
        .builder-fn-controls {
            display: flex;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }
        .builder-fn-btn {
            border-radius: 0.75rem; font-size: 1rem; font-weight: 600;
            min-height: 4.5rem; /* 72px */
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }
        
        /* v29: å€åˆ†åˆªé™¤æŒ‰éˆ• (é»ƒè‰²) */
        .builder-fn-btn-delete {
            background-color: #f59e0b; /* bg-amber-500 */
            color: white;
        }
        .builder-fn-btn-delete:active {
            background-color: #f59e0b; /* ä¿æŒé¡è‰² */
        }

        /* v29: é›™èªè©å½™å€å¡Š (å †ç–Šæ’ç‰ˆ) */
        .word-block {
            display: inline-flex; /* æ”¹ç‚º flex å®¹å™¨ */
            flex-direction: column; /* å‚ç›´å †ç–Š */
            align-items: center; /* ç½®ä¸­ */
            padding: 0.25rem 0.5rem; /* å¾®èª¿é–“è· */
            margin-bottom: 0.5rem; /* è©å½™é–“çš„ä¸‹é–“è· */
            line-height: 1.2; /* ç¸®çŸ­è¡Œé«˜ */
        }
        .word-block-zh {
            font-size: 3rem; /* ä¿æŒ 3rem */
            font-weight: 500;
        }
        .word-block-lang {
            font-size: 1.75rem; /* 28px */
            font-weight: 500;
            color: #3b82f6; /* text-blue-600 */
        }

        /* v28: é¡åˆ¥åˆ†é  (å¯è‡ªå‹•æ›è¡Œ) */
        .category-tabs {
            display: flex;
            flex-wrap: wrap; /* è‡ªå‹•æ›è¡Œ */
            padding: 0.75rem;
            border-bottom: 1px solid #e5e7eb;
            background-color: #f3f4f6; /* bg-gray-100 */
            flex-shrink: 0;
            gap: 0.5rem; /* 8px */
            /* v28: è®“åˆ†é é»åœ¨é ‚éƒ¨ */
            position: sticky; top: 0; z-index: 10;
        }

        .tab-btn {
            flex-shrink: 0; margin: 0; padding: 0.625rem 1.25rem;
            font-size: 1.125rem; font-weight: 500;
            color: #4b5563; background-color: transparent; box-shadow: none;
        }
        .tab-btn.active {
            background-color: white; color: #3b82f6; font-weight: 700;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
        }

        /* v28: åº•éƒ¨å°è¦½åˆ— (æ°¸ä¹…å¯è¦‹) */
        .main-nav {
            display: flex; border-top: 1px solid #e5e7eb;
            background-color: #ffffff;
            padding-bottom: env(safe-area-inset-bottom);
            flex-shrink: 0;
        }
        /* v28: ä¸»å°è¦½åˆ— (3 æ¬„) */
        .nav-btn {
            flex: 1; flex-direction: column; padding: 0.5rem 0.5rem 0.25rem;
            font-size: 1rem; border-radius: 0; min-height: 5rem;
            color: #9ca3af; box-shadow: none; font-weight: 500;
            background-color: white;
        }
        .nav-btn.active {
            color: #3b82f6; background-color: white;
        }
        
        /* v28: è¨­å®šé é¢ */
        .settings-view {
            padding: 1.5rem;
        }
        .settings-view h2 {
            font-size: 2rem; /* 32px */
            font-weight: 700;
            color: #111827;
            margin-bottom: 1.5rem;
        }
        .settings-view h3 {
            font-size: 1.125rem; /* 18px */
            font-weight: 500;
            color: #4b5563;
            margin-bottom: 1rem;
            border-bottom: 1px solid #e5e7eb;
            padding-bottom: 0.5rem;
        }
        .size-btn {
            font-size: 1.125rem; font-weight: 600;
            padding-top: 1.5rem; padding-bottom: 1.5rem;
            background-color: white;
            color: #3b82f6;
            border: 2px solid #dbeafe;
        }
        .size-btn.active {
            background-color: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }
        /* v28: ä¸‹æ‹‰é¸å–®æ¨£å¼ */
        .select-input {
            width: 100%; font-size: 1.125rem; padding: 0.75rem 1rem;
            border: 1px solid #d1d5db; border-radius: 0.75rem; box-sizing: border-box;
            background-color: white;
            appearance: none; -webkit-appearance: none;
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2220%22%20height%3D%2220%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E');
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
        }
        .select-input:focus {
            outline: none; border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
        }
        
        /* å‹•ç•« */
        .flash-sentence { animation: flash-sentence-animation 0.6s ease-out; }
        @keyframes flash-sentence-animation { 0% { background-color: #e0e7ff; } 100% { background-color: #f9fafb; } }
        
        .flash-quick-btn { animation: flash-quick-btn-animation 0.4s ease-out; }
        @keyframes flash-quick-btn-animation { 50% { transform: scale(1.02); filter: brightness(1.2); } }
        
        /* v29: æ–°å¢è©å½™çš„å‹•ç•« */
        .flash-add-word { animation: flash-add-word-animation 0.4s ease-out; }
        @keyframes flash-add-word-animation { 
            0% { background-color: #dbeafe; /* bg-blue-100 */ } 
            100% { background-color: #f9fafb; /* bg-gray-50 */ } 
        }

        .hidden { display: none; }
    </style>
</head>
<body class="bg-gray-50">

    <div id="main-app-view" class="app-view">
        <div class="app-layout">
            
            <main id="app-content">
                
                <div id="quick-actions-view" class="quick-view">
                    <div id="quick-category-tabs" class="category-tabs"></div>
                    <div id="quick-word-grid" class="quick-word-grid"></div>
                </div>
                
                <div id="builder-view" class="builder-view hidden">
                    <div class="sentence-display-container">
                        <div id="sentence-display" class="sentence-display text-gray-900"></div>
                        <div class="builder-fn-controls">
                            <button id="speak-btn" class="btn builder-fn-btn flex-1 bg-blue-600 text-white shadow-lg shadow-blue-500/30">ğŸ”Š æœ—è®€</button>
                            <button id="delete-btn" class="btn builder-fn-btn w-1/4 builder-fn-btn-delete">â¬…ï¸ åˆªé™¤</button>
                            <button id="clear-btn" class="btn builder-fn-btn w-1/4 bg-gray-200 text-gray-700 transition-colors duration-200">âŒ æ¸…é™¤</button>
                        </div>
                    </div>
                    
                    <div id="builder-category-tabs" class="category-tabs"></div>
                    
                    <div id="builder-word-grid" class="builder-word-grid"></div>
                </div>
                
                <div id="settings-view" class="settings-view hidden">
                    <h2>è¨­å®š</h2>
                    
                    <h3>æŒ‰éˆ•å¤§å°</h3>
                    <div class="grid grid-cols-3 gap-3">
                        <button id="size-btn-small" class="btn size-btn">å°<br>(æ˜“è®€)</button>
                        <button id="size-btn-medium" class="btn size-btn">ä¸­<br>(é è¨­)</button>
                        <button id="size-btn-large" class="btn size-btn">å¤§<br>(é˜²æŠ–)</button>
                    </div>

                    <h3 class="mt-8">æœ—è®€èªè¨€</h3>
                    <p class="text-gray-600 mb-3">é¸æ“‡ App æœ—è®€æ™‚æ‰€ä½¿ç”¨çš„èªè¨€ï¼ˆä¾‹å¦‚ï¼šçµ¦å¤–ç±ç…§é¡§è€…è½ï¼‰ã€‚</p>
                    <select id="language-select" class="select-input">
                        <option value="zh-TW">ä¸­æ–‡ (é è¨­)</option>
                        <option value="en-US">English (è‹±èª)</option>
                        <option value="id-ID">Bahasa Indonesia (å°å°¼èª)</option>
                        <option value="vi-VN">Tiáº¿ng Viá»‡t (è¶Šå—èª)</option>
                        <option value="tl-PH">Tagalog (Filipino)</option>
                    </select>

                    <div class="mt-8 p-4 bg-white rounded-lg shadow-sm border border-gray-200">
                        <h3 class="mt-0 border-none">é—œæ–¼è‡ªè¨‚è©å½™</h3>
                        <p class="text-gray-600 mt-2">
                            æ‚¨å¯ä»¥åœ¨ã€Œçµ„åˆå¥å­ã€æ¨¡å¼ä¸­ï¼Œé»æ“Šä»»ä¸€é¡åˆ¥ï¼ˆå¦‚ã€Œä¸»è©ã€ï¼‰çš„æœ€å¾Œä¸€å€‹ç°è‰²æŒ‰éˆ•ã€Œï¼‹ æ–°å¢è©å½™ã€ï¼Œä¾†åŠ å…¥æ‚¨å°ˆå±¬çš„è©å½™ã€‚
                        </p>
                        <p class="text-gray-600 mt-2">
                            æ‰€æœ‰æ–°å¢çš„è©å½™éƒ½æœƒè‡ªå‹•å„²å­˜åœ¨é€™å°è£ç½®ä¸Šã€‚
                        </p>
                    </div>
                </div>
                
            </main>
            
            <nav id="main-nav" class="main-nav">
                <button id="nav-quick-btn" class="btn nav-btn active">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 20.25l1.5-6.75H3.75Z" />
                    </svg>
                    ä¸€éµæ±‚åŠ©
                </button>
                <button id="nav-builder-btn" class="btn nav-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                      <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10" />
                    </svg>
                    çµ„åˆå¥å­
                </button>
                <button id="nav-settings-btn" class="btn nav-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M12 9.75a2.25 2.25 0 110 4.5 2.25 2.25 0 010-4.5z" />
                      <path stroke-linecap="round" stroke-linejoin="round" d="M18.375 12c0-1.036-.234-2.006-.653-2.875l.487-1.861a.217.217 0 00-.064-.228l-1.518-1.518a.217.217 0 00-.228-.064l-1.86.486A9.701 9.701 0 0012 5.625c-1.036 0-2.006.234-2.875.653l-1.86-.487a.217.217 0 00-.228.064L5.518 7.372a.217.217 0 00-.064.228l.486 1.861A9.701 9.701 0 005.625 12c0 1.036.234 2.006.653 2.875l-.486 1.861a.217.217 0 00.064.228l1.518 1.518a.217.217 0 00.228.064l1.86-.486A9.701 9.701 0 0012 18.375c1.036 0 2.006-.234 2.875-.653l1.86.486a.217.217 0 00.228-.064l1.518-1.518a.217.217 0 00.064-.228l-.486-1.861A9.701 9.701 0 0018.375 12z" />
                    </svg>
                    è¨­å®š
                </button>
            </nav>
            
        </div>
    </div>
    
    <div id="add-word-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3 id="modal-title">æ–°å¢è©å½™</h3>
            
            <label for="modal-input-zh" class="block mb-2 text-sm font-medium text-gray-700">ä¸­æ–‡ (å¿…å¡«)</label>
            <input type="text" id="modal-input-zh" placeholder="è«‹è¼¸å…¥æ–°è©å½™..." class="modal-input-style">
            
            <label for="modal-input-lang" class="block mt-4 mb-2 text-sm font-medium text-gray-700">
                å¤–èª (é¸å¡«)
                <span class="text-xs text-gray-500">(è‹±èª/å°å°¼èª/è¶Šå—èªç­‰)</span>
            </label>
            <input type="text" id="modal-input-lang" placeholder="English / Bahasa / Tiáº¿ng Viá»‡t..." class="modal-input-style">
            
            <div class="flex gap-3 mt-6">
                <button id="modal-cancel-btn" class="btn w-1/2 bg-gray-200 text-gray-700 font-medium">å–æ¶ˆ</button>
                <button id="modal-save-btn" class="btn w-1/2 bg-blue-600 text-white font-medium">å„²å­˜</button>
            </div>
        </div>
    </div>


    <script>
        // -----------------------------------------------------------
        // v29.1 è©å½™åº« (å…¨é¢åŠ å…¥ Emoji)
        // -----------------------------------------------------------
        
        // v29.1: ä¸€éµæ±‚åŠ© (Quick Actions) - åŠ å…¥ Emoji
        const quickCategories = {
            "å¸¸ç”¨èªå¥": {"color": "bg-red-600 text-white", "words": [
                {"id": "q_pain", "emoji": "ğŸ˜«", "labels": {"zh-TW": "æˆ‘ç—›", "en-US": "I'm in pain", "id-ID": "Saya sakit", "vi-VN": "TÃ´i Ä‘au", "tl-PH": "Masakit ako"}},
                {"id": "q_uncomfortable", "emoji": "ğŸ¤¢", "labels": {"zh-TW": "æˆ‘ä¸èˆ’æœ", "en-US": "I'm uncomfortable", "id-ID": "Saya tidak nyaman", "vi-VN": "TÃ´i khÃ³ chá»‹u", "tl-PH": "Hindi ako komportable"}},
                {"id": "q_help", "emoji": "ğŸ†˜", "labels": {"zh-TW": "å¹«æˆ‘", "en-US": "Help me", "id-ID": "Tolong saya", "vi-VN": "GiÃºp tÃ´i", "tl-PH": "Tulungan mo ako"}},
                {"id": "q_poop", "emoji": "ğŸ’©", "labels": {"zh-TW": "æˆ‘æƒ³å¤§ä¾¿", "en-US": "I need to poop", "id-ID": "Saya mau buang air besar", "vi-VN": "TÃ´i muá»‘n Ä‘i Ä‘áº¡i tiá»‡n", "tl-PH": "Gusto kong dumumi"}},
                {"id": "q_pee", "emoji": "ğŸš½", "labels": {"zh-TW": "æˆ‘æƒ³å°ä¾¿", "en-US": "I need to pee", "id-ID": "Saya mau buang air kecil", "vi-VN": "TÃ´i muá»‘n Ä‘i tiá»ƒu", "tl-PH": "Gusto kong umihi"}},
                {"id": "q_pooped", "emoji": "ğŸ’©", "labels": {"zh-TW": "æˆ‘å¤§ä¾¿äº†", "en-US": "I pooped", "id-ID": "Saya sudah buang air besar", "vi-VN": "TÃ´i Ä‘Ã£ Ä‘áº¡i tiá»‡n rá»“i", "tl-PH": "Nakadumi na ako"}},
                {"id": "q_peed", "emoji": "ğŸš½", "labels": {"zh-TW": "æˆ‘å°ä¾¿äº†", "en-US": "I peed", "id-ID": "Saya sudah buang air kecil", "vi-VN": "TÃ´i Ä‘Ã£ tiá»ƒu tiá»‡n rá»“i", "tl-PH": "Nakaihi na ako"}},
                {"id": "q_turn_over", "emoji": "ğŸ”„", "labels": {"zh-TW": "å¹«æˆ‘ç¿»èº«", "en-US": "Turn me over", "id-ID": "Bantu saya balik badan", "vi-VN": "GiÃºp tÃ´i láº­t ngÆ°á»i", "tl-PH": "Itagilid mo ako"}},
                {"id": "q_thirsty", "emoji": "ğŸ’§", "labels": {"zh-TW": "æˆ‘æ¸´äº†", "en-US": "I'm thirsty", "id-ID": "Saya haus", "vi-VN": "TÃ´i khÃ¡t", "tl-PH": "Nauuhaw ako"}},
                {"id": "q_hungry", "emoji": "ğŸ˜‹", "labels": {"zh-TW": "æˆ‘é¤“äº†", "en-US": "I'm hungry", "id-ID": "Saya lapar", "vi-VN": "TÃ´i Ä‘Ã³i", "tl-PH": "Gutom ako"}},
                {"id": "q_full", "emoji": "ğŸ˜Œ", "labels": {"zh-TW": "æˆ‘é£½äº†", "en-US": "I'm full", "id-ID": "Saya kenyang", "vi-VN": "TÃ´i no rá»“i", "tl-PH": "Busog na ako"}},
                {"id": "q_sleep", "emoji": "ğŸ˜´", "labels": {"zh-TW": "æˆ‘æƒ³ç¡è¦º", "en-US": "I want to sleep", "id-ID": "Saya mau tidur", "vi-VN": "TÃ´i muá»‘n ngá»§", "tl-PH": "Gusto kong matulog"}},
                {"id": "q_bathe", "emoji": "ğŸ›€", "labels": {"zh-TW": "æˆ‘æƒ³æ´—æ¾¡", "en-US": "I want to bathe", "id-ID": "Saya mau mandi", "vi-VN": "TÃ´i muá»‘n táº¯m", "tl-PH": "Gusto kong maligo"}},
                {"id": "q_breathless", "emoji": "ğŸ˜®â€ğŸ’¨", "labels": {"zh-TW": "å‘¼å¸å›°é›£", "en-US": "Difficulty breathing", "id-ID": "Susah bernapas", "vi-VN": "KhÃ³ thá»Ÿ", "tl-PH": "Nahihirapang huminga"}}
            ]},
            "é†«ç™‚/ç—‡ç‹€": {"color": "bg-red-600 text-white", "words": [
                {"id": "q_understand", "emoji": "ğŸ‘", "labels": {"zh-TW": "æˆ‘æ˜ç™½", "en-US": "I understand", "id-ID": "Saya mengerti", "vi-VN": "TÃ´i hiá»ƒu", "tl-PH": "Naiintihan ko"}},
                {"id": "q_dont_understand", "emoji": "â“", "labels": {"zh-TW": "æˆ‘è½ä¸æ‡‚", "en-US": "I don't understand", "id-ID": "Saya tidak mengerti", "vi-VN": "TÃ´i khÃ´ng hiá»ƒu", "tl-PH": "Hindi ko naiintindihan"}},
                {"id": "q_pain_high", "emoji": "ğŸ”Ÿ", "labels": {"zh-TW": "å¾ˆç—› (8-10)", "en-US": "Very painful (8-10)", "id-ID": "Sangat sakit (8-10)", "vi-VN": "Ráº¥t Ä‘au (8-10)", "tl-PH": "Sobrang sakit (8-10)"}},
                {"id": "q_pain_mid", "emoji": "ğŸ–ï¸", "labels": {"zh-TW": "ä¸­ç­‰ç—› (4-7)", "en-US": "Medium pain (4-7)", "id-ID": "Cukup sakit (4-7)", "vi-VN": "Äau vá»«a (4-7)", "tl-PH": "Katamtamang sakit (4-7)"}},
                {"id": "q_pain_low", "emoji": "ğŸ¤", "labels": {"zh-TW": "ä¸€é»ç—› (1-3)", "en-US": "A little pain (1-3)", "id-ID": "Sedikit sakit (1-3)", "vi-VN": "Äau nháº¹ (1-3)", "tl-PH": "Medyo masakit (1-3)"}},
                {"id": "q_pain_no", "emoji": "ğŸ‘Œ", "labels": {"zh-TW": "ä¸ç—› (0)", "en-US": "No pain (0)", "id-ID": "Tidak sakit (0)", "vi-VN": "KhÃ´ng Ä‘au (0)", "tl-PH": "Walang sakit (0)"}},
                {"id": "q_nausea", "emoji": "ğŸ¤¢", "labels": {"zh-TW": "æƒ³å (å™å¿ƒ)", "en-US": "Nauseous", "id-ID": "Mual", "vi-VN": "Buá»“n nÃ´n", "tl-PH": "Nasusuka"}},
                {"id": "q_dizzy", "emoji": "ğŸ˜µâ€ğŸ’«", "labels": {"zh-TW": "é ­æšˆ", "en-US": "Dizzy", "id-ID": "Pusing", "vi-VN": "ChÃ³ng máº·t", "tl-PH": "Nahihilo"}}
            ]},
            "æ‡‰ç­”/æƒ…æ„Ÿ": {"color": "bg-blue-600 text-white", "words": [
                {"id": "q_yes", "emoji": "â­•", "labels": {"zh-TW": "æ˜¯çš„", "en-US": "Yes", "id-ID": "Ya", "vi-VN": "VÃ¢ng", "tl-PH": "Oo"}},
                {"id": "q_no", "emoji": "âŒ", "labels": {"zh-TW": "ä¸æ˜¯", "en-US": "No", "id-ID": "Bukan/Tidak", "vi-VN": "KhÃ´ng", "tl-PH": "Hindi"}},
                {"id": "q_ok", "emoji": "ğŸ‘", "labels": {"zh-TW": "OK", "en-US": "OK", "id-ID": "OK", "vi-VN": "OK", "tl-PH": "OK"}},
                {"id": "q_hello", "emoji": "ğŸ‘‹", "labels": {"zh-TW": "ä½ å¥½", "en-US": "Hello", "id-ID": "Halo", "vi-VN": "Xin chÃ o", "tl-PH": "Hello / Kumusta"}},
                {"id": "q_thanks", "emoji": "ğŸ™", "labels": {"zh-TW": "è¬è¬", "en-US": "Thank you", "id-ID": "Terima kasih", "vi-VN": "Cáº£m Æ¡n", "tl-PH": "Salamat"}},
                {"id": "q_bye", "emoji": "ğŸ‘‹", "labels": {"zh-TW": "å†è¦‹", "en-US": "Goodbye", "id-ID": "Selamat tinggal", "vi-VN": "Táº¡m biá»‡t", "tl-PH": "Paalam"}},
                {"id": "q_sorry", "emoji": "ğŸ™‡", "labels": {"zh-TW": "å°ä¸èµ·", "en-US": "Sorry", "id-ID": "Maaf", "vi-VN": "Xin lá»—i", "tl-PH": "Pasensya na"}},
                {"id": "q_love_you", "emoji": "â¤ï¸", "labels": {"zh-TW": "æˆ‘æ„›ä½ ", "en-US": "I love you", "id-ID": "Aku cinta kamu", "vi-VN": "Em yÃªu anh / Anh yÃªu em", "tl-PH": "Mahal kita"}},
                {"id": "q_miss_you", "emoji": "ğŸ’­", "labels": {"zh-TW": "æˆ‘æƒ³ä½ ", "en-US": "I miss you", "id-ID": "Aku rindu kamu", "vi-VN": "Em nhá»› anh / Anh nhá»› em", "tl-PH": "Miss na kita"}},
                {"id": "q_happy", "emoji": "ğŸ˜„", "labels": {"zh-TW": "æˆ‘å¾ˆé–‹å¿ƒ", "en-US": "I am happy", "id-ID": "Saya senang", "vi-VN": "TÃ´i vui", "tl-PH": "Masaya ako"}},
                {"id": "q_bored", "emoji": "ğŸ˜‘", "labels": {"zh-TW": "æˆ‘å¾ˆç„¡èŠ", "en-US": "I am bored", "id-ID": "Saya bosan", "vi-VN": "TÃ´i chÃ¡n", "tl-PH": "Nababagot ako"}},
                {"id": "q_lonely", "emoji": "ğŸ˜Ÿ", "labels": {"zh-TW": "æˆ‘å¾ˆå¯‚å¯", "en-US": "I am lonely", "id-ID": "Saya kesepian", "vi-VN": "TÃ´i cÃ´ Ä‘Æ¡n", "tl-PH": "Nalulungkot ako"}}
            ]},
            "ç’°å¢ƒ": {"color": "bg-sky-600 text-white", "words": [
                {"id": "q_cold", "emoji": "ğŸ¥¶", "labels": {"zh-TW": "æˆ‘å†·", "en-US": "I'm cold", "id-ID": "Saya dingin", "vi-VN": "TÃ´i láº¡nh", "tl-PH": "Giniginaw ako"}},
                {"id": "q_hot", "emoji": "ğŸ¥µ", "labels": {"zh-TW": "æˆ‘ç†±", "en-US": "I'm hot", "id-ID": "Saya panas", "vi-VN": "TÃ´i nÃ³ng", "tl-PH": "Naiinitan ako"}},
                {"id": "q_light_on", "emoji": "ğŸ’¡", "labels": {"zh-TW": "é–‹ç‡ˆ", "en-US": "Turn on the light", "id-ID": "Nyalakan lampu", "vi-VN": "Báº­t Ä‘Ã¨n", "tl-PH": "Buksan ang ilaw"}},
                {"id": "q_light_off", "emoji": "ğŸŒ‘", "labels": {"zh-TW": "é—œç‡ˆ", "en-US": "Turn off the light", "id-ID": "Matikan lampu", "vi-VN": "Táº¯t Ä‘Ã¨n", "tl-PH": "Patayin ang ilaw"}},
                {"id": "q_too_loud", "emoji": "ğŸ™‰", "labels": {"zh-TW": "å¤ªåµäº†", "en-US": "Too loud", "id-ID": "Terlalu berisik", "vi-VN": "á»’n quÃ¡", "tl-PH": "Masyadong maingay"}},
                {"id": "q_quiet", "emoji": "ğŸ¤«", "labels": {"zh-TW": "å®‰éœä¸€é»", "en-US": "Be quiet", "id-ID": "Harap tenang", "vi-VN": "Im láº·ng chÃºt", "tl-PH": "Tumahimik po"}},
                {"id": "q_bed_up", "emoji": "ğŸ”¼", "labels": {"zh-TW": "åºŠæ–é«˜", "en-US": "Raise the bed", "id-ID": "Naikkan tempat tidur", "vi-VN": "NÃ¢ng giÆ°á»ng lÃªn", "tl-PH": "Itaas ang kama"}},
                {"id": "q_bed_down", "emoji": "ğŸ”½", "labels": {"zh-TW": "åºŠæ–ä½", "en-US": "Lower the bed", "id-ID": "Turunkan tempat tidur", "vi-VN": "Háº¡ giÆ°á»ng xuá»‘ng", "tl-PH": "Ibaba ang kama"}}
            ]}
        };

        // v29.1: çµ„åˆå¥å­ (Builder) - åŠ å…¥ Emoji
        const defaultBuilderCategories = {
            "ä¸»è©": {"color": "bg-orange-600 text-white", "words": [
                { "id": "me", "emoji": "ğŸ™‹", "labels": {"zh-TW": "æˆ‘", "en-US": "I", "id-ID": "Saya", "vi-VN": "TÃ´i", "tl-PH": "Ako"} },
                { "id": "you", "emoji": "ğŸ«µ", "labels": {"zh-TW": "ä½ ", "en-US": "You", "id-ID": "Anda", "vi-VN": "Báº¡n", "tl-PH": "Ikaw"} },
                { "id": "he_she", "emoji": "ğŸ‘¤", "labels": {"zh-TW": "ä»–/å¥¹", "en-US": "He/She", "id-ID": "Dia", "vi-VN": "Anh áº¥y/CÃ´ áº¥y", "tl-PH": "Siya"} },
                { "id": "family", "emoji": "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦", "labels": {"zh-TW": "å®¶äºº", "en-US": "Family", "id-ID": "Keluarga", "vi-VN": "Gia Ä‘Ã¬nh", "tl-PH": "Pamilya"} },
                { "id": "friend", "emoji": "ğŸ˜Š", "labels": {"zh-TW": "æœ‹å‹", "en-US": "Friend", "id-ID": "Teman", "vi-VN": "Báº¡n bÃ¨", "tl-PH": "Kaibigan"} },
                { "id": "doctor", "emoji": "ğŸ©º", "labels": {"zh-TW": "é†«ç”Ÿ", "en-US": "Doctor", "id-ID": "Dokter", "vi-VN": "BÃ¡c sÄ©", "tl-PH": "Doktor"} },
                { "id": "nurse", "emoji": "ğŸ‘©â€âš•ï¸", "labels": {"zh-TW": "è­·ç†å¸«", "en-US": "Nurse", "id-ID": "Perawat", "vi-VN": "Y tÃ¡", "tl-PH": "Nars"} },
                { "id": "caregiver", "emoji": "ğŸ¤", "labels": {"zh-TW": "ç…§é¡§è€…", "en-US": "Caregiver", "id-ID": "Pengasuh", "vi-VN": "NgÆ°á»i chÄƒm sÃ³c", "tl-PH": "Tagapag-alaga"} }
            ]},
            "å‹•è©/éœ€æ±‚": {"color": "bg-green-600 text-white", "words": [
                { "id": "want", "emoji": "ğŸ¤”", "labels": {"zh-TW": "æƒ³", "en-US": "Want", "id-ID": "Ingin", "vi-VN": "Muá»‘n", "tl-PH": "Gusto"} },
                { "id": "need", "emoji": "ğŸ¤š", "labels": {"zh-TW": "è¦", "en-US": "Need/Want", "id-ID": "Mau", "vi-VN": "Cáº§n", "tl-PH": "Kailangan"} },
                { "id": "not", "emoji": "ğŸ™…", "labels": {"zh-TW": "ä¸", "en-US": "Not", "id-ID": "Tidak", "vi-VN": "KhÃ´ng", "tl-PH": "Hindi"} },
                { "id": "is", "emoji": "â­•", "labels": {"zh-TW": "æ˜¯", "en-US": "Is/Yes", "id-ID": "Adalah/Ya", "vi-VN": "LÃ /VÃ¢ng", "tl-PH": "Ay/Oo"} },
                { "id": "go", "emoji": "â¡ï¸", "labels": {"zh-TW": "å»", "en-US": "Go", "id-ID": "Pergi", "vi-VN": "Äi", "tl-PH": "Punta"} },
                { "id": "eat", "emoji": "ğŸ˜‹", "labels": {"zh-TW": "åƒ", "en-US": "Eat", "id-ID": "Makan", "vi-VN": "Ä‚n", "tl-PH": "Kain"} },
                { "id": "drink", "emoji": "ğŸ’§", "labels": {"zh-TW": "å–", "en-US": "Drink", "id-ID": "Minum", "vi-VN": "Uá»‘ng", "tl-PH": "Inom"} },
                { "id": "wear", "emoji": "ğŸ‘•", "labels": {"zh-TW": "ç©¿", "en-US": "Wear", "id-ID": "Pakai", "vi-VN": "Máº·c", "tl-PH": "Suot"} },
                { "id": "on", "emoji": "â¬†ï¸", "labels": {"zh-TW": "ä¸Š", "en-US": "Go to/On", "id-ID": "Ke/Di atas", "vi-VN": "Äi/TrÃªn", "tl-PH": "Sa"} },
                { "id": "watch", "emoji": "ğŸ‘€", "labels": {"zh-TW": "çœ‹", "en-US": "Watch/Look", "id-ID": "Lihat/Menonton", "vi-VN": "Xem/NhÃ¬n", "tl-PH": "Tingin/Nood"} },
                { "id": "listen", "emoji": "ğŸ‘‚", "labels": {"zh-TW": "è½", "en-US": "Listen", "id-ID": "Dengar", "vi-VN": "Nghe", "tl-PH": "Pakinig"} },
                { "id": "find", "emoji": "ğŸ”", "labels": {"zh-TW": "æ‰¾", "en-US": "Find/Look for", "id-ID": "Cari", "vi-VN": "TÃ¬m", "tl-PH": "Hanap"} },
                { "id": "feel", "emoji": "âœ‹", "labels": {"zh-TW": "è¦ºå¾—", "en-US": "Feel", "id-ID": "Rasa", "vi-VN": "Cáº£m tháº¥y", "tl-PH": "Pakiramdam"} },
                { "id": "open", "emoji": "ğŸ”¼", "labels": {"zh-TW": "é–‹", "en-US": "Open/Turn on", "id-ID": "Buka/Nyalakan", "vi-VN": "Má»Ÿ/Báº­t", "tl-PH": "Buksan"} },
                { "id": "close", "emoji": "ğŸ”½", "labels": {"zh-TW": "é—œ", "en-US": "Close/Turn off", "id-ID": "Tutup/Matikan", "vi-VN": "ÄÃ³ng/Táº¯t", "tl-PH": "Isara/Patayin"} },
                { "id": "come", "emoji": " LÃ¡i", "labels": {"zh-TW": "ä¾†", "en-US": "Come", "id-ID": "Datang", "vi-VN": "Äáº¿n", "tl-PH": "Halika"} }
            ]},
            "æ„Ÿå—/ç‹€æ…‹": {"color": "bg-teal-600 text-white", "words": [
                { "id": "pain", "emoji": "ğŸ˜«", "labels": {"zh-TW": "ç—›", "en-US": "Painful", "id-ID": "Sakit", "vi-VN": "Äau", "tl-PH": "Masakit"} },
                { "id": "cold", "emoji": "ğŸ¥¶", "labels": {"zh-TW": "å†·", "en-US": "Cold", "id-ID": "Dingin", "vi-VN": "Láº¡nh", "tl-PH": "Malamig"} },
                { "id": "hot", "emoji": "ğŸ¥µ", "labels": {"zh-TW": "ç†±", "en-US": "Hot", "id-ID": "Panas", "vi-VN": "NÃ³ng", "tl-PH": "Mainit"} },
                { "id": "comfortable", "emoji": "ğŸ˜Œ", "labels": {"zh-TW": "èˆ’æœ", "en-US": "Comfortable", "id-ID": "Nyaman", "vi-VN": "Thoáº£i mÃ¡i", "tl-PH": "Komportable"} },
                { "id": "uncomfortable", "emoji": "ğŸ¤¢", "labels": {"zh-TW": "ä¸èˆ’æœ", "en-US": "Uncomfortable", "id-ID": "Tidak nyaman", "vi-VN": "KhÃ³ chá»‹u", "tl-PH": "Hindi komportable"} },
                { "id": "happy", "emoji": "ğŸ˜„", "labels": {"zh-TW": "é–‹å¿ƒ", "en-US": "Happy", "id-ID": "Senang", "vi-VN": "Vui váº»", "tl-PH": "Masaya"} },
                { "id": "sad", "emoji": "ğŸ˜¢", "labels": {"zh-TW": "é›£é", "en-US": "Sad", "id-ID": "Sedih", "vi-VN": "Buá»“n", "tl-PH": "Malungkot"} },
                { "id": "itchy", "emoji": "âœ‹", "labels": {"zh-TW": "ç™¢", "en-US": "Itchy", "id-ID": "Gatal", "vi-VN": "Ngá»©a", "tl-PH": "Makati"} },
                { "id": "numb", "emoji": " numbness", "labels": {"zh-TW": "éº»", "en-US": "Numb", "id-ID": "Mati rasa", "vi-VN": "TÃª", "tl-PH": "Manhid"} },
                { "id": "tired", "emoji": "ğŸ¥±", "labels": {"zh-TW": "ç´¯", "en-US": "Tired", "id-ID": "Lelah", "vi-VN": "Má»‡t", "tl-PH": "Pagod"} }
            ]},
            "ç¤¾äº¤": {"color": "bg-blue-600 text-white", "words": [
                { "id": "thanks", "emoji": "ğŸ™", "labels": {"zh-TW": "è¬è¬", "en-US": "Thank you", "id-ID": "Terima kasih", "vi-VN": "Cáº£m Æ¡n", "tl-PH": "Salamat"} },
                { "id": "hello", "emoji": "ğŸ‘‹", "labels": {"zh-TW": "ä½ å¥½", "en-US": "Hello", "id-ID": "Halo", "vi-VN": "Xin chÃ o", "tl-PH": "Hello / Kumusta"} },
                { "id": "good_morning", "emoji": "â˜€ï¸", "labels": {"zh-TW": "æ—©å®‰", "en-US": "Good morning", "id-ID": "Selamat pagi", "vi-VN": "ChÃ o buá»•i sÃ¡ng", "tl-PH": "Magandang umaga"} },
                { "id": "good_night", "emoji": "ğŸŒ™", "labels": {"zh-TW": "æ™šå®‰", "en-US": "Good night", "id-ID": "Selamat malam", "vi-VN": "ChÃºc ngá»§ ngon", "tl-PH": "Magandang gabi"} }
            ]},
            "é£Ÿç‰©/é£²å“": {"color": "bg-amber-600 text-white", "words": [
                { "id": "rice", "emoji": "ğŸš", "labels": {"zh-TW": "é£¯", "en-US": "Rice", "id-ID": "Nasi", "vi-VN": "CÆ¡m", "tl-PH": "Kanin"} },
                { "id": "noodle", "emoji": "ğŸœ", "labels": {"zh-TW": "éºµ", "en-US": "Noodles", "id-ID": "Mie", "vi-VN": "MÃ¬", "tl-PH": "Pansit / Noodles"} },
                { "id": "congee", "emoji": "ğŸ¥£", "labels": {"zh-TW": "ç²¥", "en-US": "Congee/Porridge", "id-ID": "Bubur", "vi-VN": "ChÃ¡o", "tl-PH": "Lugaw"} },
                { "id": "fruit", "emoji": "ğŸ", "labels": {"zh-TW": "æ°´æœ", "en-US": "Fruit", "id-ID": "Buah", "vi-VN": "TrÃ¡i cÃ¢y", "tl-PH": "Prutas"} },
                { "id": "snack", "emoji": "ğŸª", "labels": {"zh-TW": "é»å¿ƒ", "en-US": "Snack", "id-ID": "Camilan", "vi-VN": "Äá»“ Äƒn nháº¹", "tl-PH": "Meryenda"} },
                { "id": "water", "emoji": "ğŸ’§", "labels": {"zh-TW": "æ°´", "en-US": "Water", "id-ID": "Air", "vi-VN": "NÆ°á»›c", "tl-PH": "Tubig"} },
                { "id": "tea", "emoji": "ğŸµ", "labels": {"zh-TW": "èŒ¶", "en-US": "Tea", "id-ID": "Teh", "vi-VN": "TrÃ ", "tl-PH": "Tsaa"} },
                { "id": "juice", "emoji": "ğŸ§ƒ", "labels": {"zh-TW": "æœæ±", "en-US": "Juice", "id-ID": "Jus", "vi-VN": "NÆ°á»›c Ã©p", "tl-PH": "Juice"} },
                { "id": "milk", "emoji": "ğŸ¥›", "labels": {"zh-TW": "ç‰›å¥¶", "en-US": "Milk", "id-ID": "Susu", "vi-VN": "Sá»¯a", "tl-PH": "Gatas"} }
            ]},
            "ç‰©å“/ç’°å¢ƒ": {"color": "bg-purple-600 text-white", "words": [
                { "id": "phone", "emoji": "ğŸ“±", "labels": {"zh-TW": "æ‰‹æ©Ÿ", "en-US": "Phone", "id-ID": "Telepon", "vi-VN": "Äiá»‡n thoáº¡i", "tl-PH": "Telepono / Cellphone"} },
                { "id": "remote", "emoji": "ğŸ“º", "labels": {"zh-TW": "é™æ§å™¨", "en-US": "Remote", "id-ID": "Remot", "vi-VN": "Äiá»u khiá»ƒn", "tl-PH": "Remote"} },
                { "id": "glasses", "emoji": "ğŸ‘“", "labels": {"zh-TW": "çœ¼é¡", "en-US": "Glasses", "id-ID": "Kacamata", "vi-VN": "KÃ­nh", "tl-PH": "Salamin"} },
                { "id": "medicine", "emoji": "ğŸ’Š", "labels": {"zh-TW": "è—¥", "en-US": "Medicine", "id-ID": "Obat", "vi-VN": "Thuá»‘c", "tl-PH": "Gamot"} },
                { "id": "wallet", "emoji": "ğŸ‘›", "labels": {"zh-TW": "éŒ¢åŒ…", "en-US": "Wallet", "id-ID": "Dompet", "vi-VN": "VÃ­", "tl-PH": "Pitaka"} },
                { "id": "clothes", "emoji": "ğŸ‘•", "labels": {"zh-TW": "è¡£æœ", "en-US": "Clothes", "id-ID": "Pakaian", "vi-VN": "Quáº§n Ã¡o", "tl-PH": "Damit"} },
                { "id": "pants", "emoji": "ğŸ‘–", "labels": {"zh-TW": "è¤²å­", "en-US": "Pants", "id-ID": "Celana", "vi-VN": "Quáº§n", "tl-PH": "Pantalon"} },
                { "id": "diaper", "emoji": "ğŸ‘¶", "labels": {"zh-TW": "å°¿å¸ƒ", "en-US": "Diaper", "id-ID": "Popok", "vi-VN": "TÃ£", "tl-PH": "Diaper"} },
                { "id": "hearing_aid", "emoji": "ğŸ¦»", "labels": {"zh-TW": "åŠ©è½å™¨", "en-US": "Hearing aid", "id-ID": "Alat bantu dengar", "vi-VN": "MÃ¡y trá»£ thÃ­nh", "tl-PH": "Hearing aid"} },
                { "id": "denture", "emoji": "ğŸ¦·", "labels": {"zh-TW": "å‡ç‰™", "en-US": "Denture", "id-ID": "Gigi palsu", "vi-VN": "RÄƒng giáº£", "tl-PH": "Pustiso"} },
                { "id": "light", "emoji": "ğŸ’¡", "labels": {"zh-TW": "ç‡ˆ", "en-US": "Light", "id-ID": "Lampu", "vi-VN": "ÄÃ¨n", "tl-PH": "Ilaw"} },
                { "id": "tv", "emoji": "ğŸ“º", "labels": {"zh-TW": "é›»è¦–", "en-US": "TV", "id-ID": "TV", "vi-VN": "TV", "tl-PH": "TV"} },
                { "id": "ac", "emoji": "ğŸ¥¶", "labels": {"zh-TW": "å†·æ°£", "en-US": "Air conditioner", "id-ID": "AC", "vi-VN": "MÃ¡y láº¡nh", "tl-PH": "Aircon"} },
                { "id": "door", "emoji": "ğŸšª", "labels": {"zh-TW": "é–€", "en-US": "Door", "id-ID": "Pintu", "vi-VN": "Cá»­a", "tl-PH": "Pinto"} },
                { "id": "window", "emoji": "ğŸªŸ", "labels": {"zh-TW": "çª—æˆ¶", "en-US": "Window", "id-ID": "Jendela", "vi-VN": "Cá»­a sá»•", "tl-PH": "Bintana"} }
            ]},
            "åœ°æ–¹": {"color": "bg-indigo-600 text-white", "words": [
                { "id": "room", "emoji": "ğŸ›Œ", "labels": {"zh-TW": "æˆ¿é–“", "en-US": "Room", "id-ID": "Kamar", "vi-VN": "PhÃ²ng", "tl-PH": "Kuwarto"} },
                { "id": "living_room", "emoji": "ğŸ›‹ï¸", "labels": {"zh-TW": "å®¢å»³", "en-US": "Living room", "id-ID": "Ruang tamu", "vi-VN": "PhÃ²ng khÃ¡ch", "tl-PH": "Sala"} },
                { "id": "toilet", "emoji": "ğŸš½", "labels": {"zh-TW": "å»æ‰€", "en-US": "Toilet/Restroom", "id-ID": "Toilet", "vi-VN": "NhÃ  vá»‡ sinh", "tl-PH": "Banyo / C.R."} },
                { "id": "hospital", "emoji": "ğŸ¥", "labels": {"zh-TW": "é†«é™¢", "en-US": "Hospital", "id-ID": "Rumah sakit", "vi-VN": "Bá»‡nh viá»‡n", "tl-PH": "Ospital"} },
                { "id": "outside", "emoji": "ğŸŒ³", "labels": {"zh-TW": "å¤–é¢", "en-US": "Outside", "id-ID": "Luar", "vi-VN": "BÃªn ngoÃ i", "tl-PH": "Labas"} }
            ]}
        };
        
        // v28: builder é¡åˆ¥é †åº
        const categoryOrder = ["ä¸»è©", "å‹•è©/éœ€æ±‚", "æ„Ÿå—/ç‹€æ…‹", "ç¤¾äº¤", "é£Ÿç‰©/é£²å“", "ç‰©å“/ç’°å¢ƒ", "åœ°æ–¹"];

        
        // --- v28: è®Šæ•¸ ---
        let builderCategories = {};
        let quickCategoriesData = {}; // v28: å­˜æ”¾åˆä½µå¾Œçš„ quick data
        const BUILDER_DATA_KEY = 'aacBuilderData_v28'; // v28: æ›´æ–° KEY
        const SETTINGS_KEY = 'aacSettings_v28'; // v28: æ›´æ–° KEY
        
        let currentSentence = []; // v28: å„²å­˜ {id, emoji, labels} ç‰©ä»¶
        let synth = window.speechSynthesis;
        let voices = [];
        let currentCategoryToAddTo = null; 
        let isConfirmingClear = false;
        let clearConfirmTimer = null;
        
        let currentSize = 'medium';
        let currentLang = 'zh-TW'; // v28: æœ—è®€èªè¨€
        const v28_sizeClasses = {
            'small': 'h-28 text-xl',     // 7rem / 1.25rem
            'medium': 'h-36 text-2xl',    // 9rem / 1.5rem
            'large': 'h-44 text-3xl'     // 11rem / 1.875rem
        };

        // DOM å…ƒç´ 
        const mainAppContent = document.getElementById('app-content');
        const quickView = document.getElementById('quick-actions-view');
        const builderView = document.getElementById('builder-view');
        const settingsView = document.getElementById('settings-view');
        
        const quickCategoryTabs = document.getElementById('quick-category-tabs');
        const quickWordGrid = document.getElementById('quick-word-grid');
        const builderCategoryTabs = document.getElementById('builder-category-tabs');
        const builderWordGrid = document.getElementById('builder-word-grid');
        
        const sentenceDisplay = document.getElementById('sentence-display');
        
        const mainNav = document.getElementById('main-nav');
        const speakBtn = document.getElementById('speak-btn');
        const deleteBtn = document.getElementById('delete-btn');
        const clearBtn = document.getElementById('clear-btn');
        
        const navQuickBtn = document.getElementById('nav-quick-btn');
        const navBuilderBtn = document.getElementById('nav-builder-btn');
        const navSettingsBtn = document.getElementById('nav-settings-btn');

        const addWordModal = document.getElementById('add-word-modal');
        const modalTitle = document.getElementById('modal-title');
        // v29: æ›´æ–° Modal DOM
        const modalInputZh = document.getElementById('modal-input-zh');
        const modalInputLang = document.getElementById('modal-input-lang');
        const modalCancelBtn = document.getElementById('modal-cancel-btn');
        const modalSaveBtn = document.getElementById('modal-save-btn');
        
        const sizeBtnSmall = document.getElementById('size-btn-small');
        const sizeBtnMedium = document.getElementById('size-btn-medium');
        const sizeBtnLarge = document.getElementById('size-btn-large');
        const languageSelect = document.getElementById('language-select'); // v28: æ–°å¢


        // --- èªéŸ³æ ¸å¿ƒåŠŸèƒ½ ---
        function loadVoices() {
            // v28: è¼‰å…¥æ‰€æœ‰ voices, ç¨å¾Œå†éæ¿¾
            voices = synth.getVoices();
        }
        
        loadVoices();
        if (synth.onvoiceschanged !== undefined) {
            synth.onvoiceschanged = loadVoices;
        }

        // v28: speakText å‡½æ•¸æ›´æ–°, å¢åŠ  lang åƒæ•¸
        function speakText(textToSpeak, elementToFlash = null, lang = 'zh-TW') {
            if (!textToSpeak) return;
            resetClearConfirmation();
            
            document.querySelectorAll('.flash-sentence, .flash-quick-btn').forEach(e => {
                e.classList.remove('flash-sentence', 'flash-quick-btn');
            });
            
            const utterance = new SpeechSynthesisUtterance(textToSpeak);
            
            // v28: æ ¹æ“š lang åƒæ•¸å‹•æ…‹é¸æ“‡èªéŸ³
            let filteredVoices = [];
            let langPrefix = lang.split('-')[0]; // e.g., 'zh', 'en', 'id', 'vi', 'tl'
            
            if (lang === 'zh-TW') {
                filteredVoices = voices.filter(v => v.lang.includes('zh-TW') || v.lang.includes('zh'));
            } else {
                filteredVoices = voices.filter(v => v.lang.startsWith(lang) || v.lang.startsWith(langPrefix));
            }
            
            let bestVoice = filteredVoices.find(v => v.name.includes('Google') && v.lang.startsWith(lang));
            if (!bestVoice) bestVoice = filteredVoices.find(v => v.lang.startsWith(lang));
            if (!bestVoice && lang === 'zh-TW') {
                bestVoice = filteredVoices.find(v => v.lang.includes('zh-TW'));
            }
            if (!bestVoice) {
                bestVoice = filteredVoices[0];
            }
            
            if (bestVoice) {
                utterance.voice = bestVoice;
            }
            utterance.lang = lang; // è¨­å®š utterance çš„èªè¨€
            utterance.rate = (lang === 'zh-TW') ? 0.9 : 0.8; // ä¸­æ–‡ç¨å¿«, å…¶ä»–èªè¨€ç¨æ…¢
            
            utterance.onstart = () => {
                if (elementToFlash) {
                    elementToFlash.classList.add(elementToFlash.id === 'sentence-display' ? 'flash-sentence' : 'flash-quick-btn');
                }
            };
            utterance.onend = () => {
                if (elementToFlash) {
                    elementToFlash.classList.remove('flash-sentence', 'flash-quick-btn');
                }
            };

            synth.cancel();
            synth.speak(utterance);
        }

        // --- æ¨¡å¼åˆ‡æ› ---
        function showView(viewId) {
            quickView.classList.add('hidden');
            builderView.classList.add('hidden');
            settingsView.classList.add('hidden');
            
            navQuickBtn.classList.remove('active');
            navBuilderBtn.classList.remove('active');
            navSettingsBtn.classList.remove('active');
            
            mainNav.classList.remove('hidden');
            
            if (viewId === 'quick-actions-view') {
                quickView.classList.remove('hidden');
                navQuickBtn.classList.add('active');
                rerenderQuickGrid();
            } else if (viewId === 'builder-view') {
                builderView.classList.remove('hidden');
                navBuilderBtn.classList.add('active');
                rerenderBuilderGrid();
            } else if (viewId === 'settings-view') {
                settingsView.classList.remove('hidden');
                navSettingsBtn.classList.add('active');
            }
            
            mainAppContent.scrollTop = 0;
            resetClearConfirmation();
        }
        
        function rerenderQuickGrid() {
            const activeTab = quickCategoryTabs.querySelector('.tab-btn.active');
            showQuickWords(activeTab?.dataset.category || Object.keys(quickCategoriesData)[0]);
        }
        
        function rerenderBuilderGrid() {
            const activeTab = builderCategoryTabs.querySelector('.tab-btn.active');
            showBuilderWords(activeTab?.dataset.category || Object.keys(builderCategories)[0]);
        }

        // --- æ¨¡å¼ä¸€ï¼šä¸€éµæ±‚åŠ© (v29.1: Emoji æ¸²æŸ“) ---
        function initQuickActions() {
            // v28: ä½¿ç”¨ quickCategoriesData
            const categories = Object.keys(quickCategoriesData);
            quickCategoryTabs.innerHTML = ''; 
            
            categories.forEach(categoryName => {
                const btn = document.createElement('button');
                btn.className = 'btn tab-btn';
                btn.innerText = categoryName;
                btn.dataset.category = categoryName;
                btn.onclick = () => showQuickWords(categoryName);
                quickCategoryTabs.appendChild(btn);
            });
        }

        function showQuickWords(categoryName) {
            quickWordGrid.innerHTML = '';
            const category = quickCategoriesData[categoryName];
            
            // v28: éæ­· wordObj é™£åˆ—
            category.words.forEach(wordObj => {
                const btn = document.createElement('button');
                const sizeClass = v28_sizeClasses[currentSize];
                
                // v29.1: æŒ‰éˆ•æ”¹ç‚º flex-col (ä¸Šåœ–ä¸‹æ–‡)
                btn.className = `btn quick-word-btn ${category.color} ${sizeClass} flex-col`;
                
                // v29.1: æ’å…¥ Emoji å’Œæ–‡å­—
                const emoji = wordObj.emoji || 'ğŸ’¬';
                btn.innerHTML = `
                    <span class="text-5xl">${emoji}</span>
                    <span class="mt-2">${wordObj.labels['zh-TW']}</span>
                `; 
                
                // v28: æ ¹æ“šè¨­å®šçš„ currentLang æœ—è®€
                btn.onclick = () => {
                    const langToSpeak = currentLang;
                    const textToSpeak = wordObj.labels[langToSpeak] || wordObj.labels['zh-TW']; // å›é€€ä¸­æ–‡
                    speakText(textToSpeak, btn, langToSpeak);
                };
                quickWordGrid.appendChild(btn);
            });

            quickCategoryTabs.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.category === categoryName);
            });
        }

        // --- æ¨¡å¼äºŒï¼šçµ„åˆå¥å­ (v29.1: å¤šé …å„ªåŒ–) ---
        function handleClearClick() {
            if (isConfirmingClear) {
                currentSentence = [];
                updateSentence();
                resetClearConfirmation();
            } else {
                isConfirmingClear = true;
                clearBtn.innerText = "âš ï¸ ç¢ºèªæ¸…é™¤ï¼Ÿ";
                clearBtn.classList.remove('bg-gray-200', 'text-gray-700');
                clearBtn.classList.add('bg-red-600', 'text-white');
                
                clearTimeout(clearConfirmTimer);
                clearConfirmTimer = setTimeout(resetClearConfirmation, 3000);
            }
        }
        
        function resetClearConfirmation() {
            if (!isConfirmingClear && !clearBtn) return;
            isConfirmingClear = false;
            clearTimeout(clearConfirmTimer);
            if (clearBtn) {
                clearBtn.innerText = "âŒ æ¸…é™¤";
                clearBtn.classList.add('bg-gray-200', 'text-gray-700');
                clearBtn.classList.remove('bg-red-600', 'text-white');
            }
        }

        function initBuilder() {
            // v28: ä½¿ç”¨ categoryOrder
            const categories = categoryOrder;
            
            builderCategoryTabs.innerHTML = ''; 
            
            categories.forEach(categoryName => {
                const btn = document.createElement('button');
                btn.className = 'btn tab-btn';
                btn.innerText = categoryName;
                btn.dataset.category = categoryName;
                btn.onclick = () => showBuilderWords(categoryName);
                builderCategoryTabs.appendChild(btn);
            });

            // v28: ç¶å®šæŒ‰éˆ• (æœ—è®€é‚è¼¯ä¸è®Š)
            speakBtn.onclick = () => {
                resetClearConfirmation();
                const langToSpeak = currentLang;
                // v28: æœ—è®€æ™‚, *åª* æœ—è®€ç›®æ¨™èªè¨€
                const textToSpeak = currentSentence.map(wordObj => {
                    return wordObj.labels[langToSpeak] || wordObj.labels['zh-TW']; // å›é€€åˆ°ä¸­æ–‡
                }).join(langToSpeak === 'zh-TW' ? '' : ' '); // ä¸­æ–‡ä¸åŠ ç©ºæ ¼, å…¶ä»–èªè¨€åŠ ç©ºæ ¼

                if (textToSpeak) {
                    speakText(textToSpeak, sentenceDisplay, langToSpeak);
                }
            };
            deleteBtn.onclick = () => {
                resetClearConfirmation();
                currentSentence.pop();
                updateSentence();
            };
            clearBtn.onclick = handleClearClick;
            
            modalSaveBtn.onclick = saveNewWord;
            modalCancelBtn.onclick = hideAddWordModal;
        }

        function showBuilderWords(categoryName) {
            builderWordGrid.innerHTML = '';
            const category = builderCategories[categoryName];
            if (!category) return;
            
            const sizeClass = v28_sizeClasses[currentSize];

            // v28: éæ­· wordObj é™£åˆ—
            category.words.forEach(wordObj => {
                const btn = document.createElement('button');
                // v29.1: æŒ‰éˆ•æ”¹ç‚º flex-col (ä¸Šåœ–ä¸‹æ–‡)
                btn.className = `btn builder-word-btn ${category.color} ${sizeClass} flex-col`;
                
                // v29.1: æ’å…¥ Emoji å’Œæ–‡å­—
                const emoji = wordObj.emoji || 'ğŸ’¬'; // v29.1: è‡ªè¨‚è©å½™å¯èƒ½æ²’æœ‰ emoji, çµ¦å€‹å‚™æ´
                btn.innerHTML = `
                    <span class="text-5xl">${emoji}</span>
                    <span class="mt-2">${wordObj.labels['zh-TW']}</span>
                `; 
                
                btn.onclick = () => {
                    resetClearConfirmation();
                    // v28: æ¨å…¥æ•´å€‹ wordObj
                    currentSentence.push(wordObj);
                    updateSentence();
                    mainAppContent.scrollTo({ top: 0, behavior: 'smooth' });
                    
                    // v29: æ–°å¢è©å½™æ™‚, çµ¦äºˆå¥å­å€å¡Šå›é¥‹
                    sentenceDisplay.classList.add('flash-add-word');
                    setTimeout(() => sentenceDisplay.classList.remove('flash-add-word'), 400);
                };
                builderWordGrid.appendChild(btn);
            });
            
            // v29: "æ–°å¢" æŒ‰éˆ•ç§»åˆ°æœ€å¾Œ
            const addBtn = document.createElement('button');
            addBtn.className = `btn builder-word-btn bg-gray-500 text-white flex-col hover:bg-gray-600 ${sizeClass}`;
            addBtn.innerHTML = `<span class="text-3xl">ï¼‹</span><span class="text-xl font-medium">æ–°å¢è©å½™</span>`;
            addBtn.onclick = () => showAddWordModal(categoryName);
            builderWordGrid.appendChild(addBtn);


            builderCategoryTabs.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.category === categoryName);
            });
        }

        // v29: æ›´æ–°å¥å­é¡¯ç¤º (é›™èªå †ç–Šæ’ç‰ˆ)
        function updateSentence() {
            const sentenceHTML = currentSentence.map(wordObj => {
                const chineseText = wordObj.labels['zh-TW'];
                
                if (currentLang === 'zh-TW') {
                    // æ¨¡å¼ä¸€ï¼šåªæœ‰ä¸­æ–‡
                    // v29: é›–ç„¶åªæœ‰ä¸­æ–‡, ä»ä½¿ç”¨ block çµæ§‹ä»¥çµ±ä¸€æ’ç‰ˆ
                    return `<div class="word-block">
                                <span class="word-block-zh">${chineseText}</span>
                            </div>`;
                }
                
                const foreignText = wordObj.labels[currentLang] || chineseText;
                
                if (chineseText === foreignText) {
                    // æ¨¡å¼äºŒï¼šè‡ªè¨‚è©å½™ (ä¸­å¤–æ–‡ç›¸åŒ)
                    return `<div class="word-block">
                                <span class="word-block-zh">${chineseText}</span>
                            </div>`;
                }

                // æ¨¡å¼ä¸‰ï¼šé¡¯ç¤º "ä¸­æ–‡" + "Foreign"
                return `<div class="word-block">
                            <span class="word-block-zh">${chineseText}</span>
                            <span class="word-block-lang">${foreignText}</span>
                        </div>`;
            }).join(' '); // æ¯å€‹ block ä¹‹é–“ç”¨ç©ºæ ¼åˆ†é–‹
            
            sentenceDisplay.innerHTML = sentenceHTML;
            
            if(currentSentence.length === 0) {
                sentenceDisplay.innerHTML = ''; // Clear if empty
            }
        }
        
        // --- å½ˆçª— (Modal) ç›¸é—œåŠŸèƒ½ (v29: é›™è¼¸å…¥æ¡†) ---
        function showAddWordModal(categoryName) {
            currentCategoryToAddTo = categoryName;
            modalTitle.innerText = `æ–°å¢åˆ°ã€Œ${categoryName}ã€`;
            modalInputZh.value = '';  // v29: æ¸…ç©ºä¸­æ–‡
            modalInputLang.value = ''; // v29: æ¸…ç©ºå¤–èª
            addWordModal.classList.remove('hidden');
            modalInputZh.focus(); // v29: é è¨­ focus ä¸­æ–‡
        }
        
        function hideAddWordModal() {
            addWordModal.classList.add('hidden');
        }
        
        function saveNewWord() {
            const newWordZh = modalInputZh.value.trim();
            const newWordLang = modalInputLang.value.trim();
            
            if (!newWordZh || !currentCategoryToAddTo) { // v29: åƒ…æª¢æŸ¥ä¸­æ–‡ (å¿…å¡«)
                hideAddWordModal();
                return;
            }
            
            // v29: å¦‚æœå¤–èªæ¬„ä½ç‚ºç©º, å‰‡ä½¿ç”¨ä¸­æ–‡ä½œç‚ºå‚™æ´
            const foreignText = newWordLang || newWordZh;
            
            // v29.1: å»ºç«‹å¤šèªè¨€ç‰©ä»¶ (è‡ªè¨‚è©å½™æ²’æœ‰ emoji)
            const newWordObj = {
                "id": `custom_${Date.now()}`,
                "emoji": "ğŸ’¬", // v29.1: çµ¦è‡ªè¨‚è©å½™ä¸€å€‹é è¨­ emoji
                "labels": {
                    "zh-TW": newWordZh,
                    "en-US": foreignText,
                    "id-ID": foreignText,
                    "vi-VN": foreignText,
                    "tl-PH": foreignText
                }
            };
            
            builderCategories[currentCategoryToAddTo].words.push(newWordObj);
            localStorage.setItem(BUILDER_DATA_KEY, JSON.stringify(builderCategories));
            
            hideAddWordModal();
            
            // v29: å„ªåŒ–: ç§»åˆ° modal éš±è—å¾Œå†é‡ç¹ª, é«”é©—æ›´æµæš¢
            showBuilderWords(currentCategoryToAddTo);
        }

        // --- v28: è¨­å®šé é¢åŠŸèƒ½ (æ–°å¢èªè¨€) ---
        function initSettings() {
            navSettingsBtn.onclick = () => showView('settings-view');
            
            sizeBtnSmall.onclick = () => saveSizeSetting('small');
            sizeBtnMedium.onclick = () => saveSizeSetting('medium');
            sizeBtnLarge.onclick = () => saveSizeSetting('large');
            
            // v28: ç¶å®šèªè¨€é¸å–®
            languageSelect.onchange = saveLangSetting;
            
            updateSizeSettingUI();
            updateLangSettingUI();
        }
        
        function saveSizeSetting(size) {
            currentSize = size;
            saveSettings();
            updateSizeSettingUI();
            
            // v29.1: æ”¹è®Šå¤§å°å¾Œ, éœ€è¦ç«‹å³é‡ç¹ªç•¶å‰é é¢
            if (quickView.classList.contains('hidden') === false) {
                rerenderQuickGrid();
            } else if (builderView.classList.contains('hidden') === false) {
                rerenderBuilderGrid();
            }
        }

        function saveLangSetting(e) {
            currentLang = e.target.value;
            saveSettings();
            updateLangSettingUI();
            updateSentence(); // åˆ‡æ›èªè¨€å¾Œ, ç«‹åˆ»æ›´æ–°å¥å­é¡¯ç¤º
            // v28: é‡æ–°ç¹ªè£½ä¸€éµæ±‚åŠ© (é›–ç„¶æŒ‰éˆ•æ–‡å­—ä¸è®Š, ä½†é»æ“Šé‚è¼¯æœƒè®Š)
            if (quickView.classList.contains('hidden') === false) {
                rerenderQuickGrid();
            }
        }
        
        function saveSettings() {
            const settings = {
                size: currentSize,
                lang: currentLang
            };
            localStorage.setItem(SETTINGS_KEY, JSON.stringify(settings));
        }

        function updateSizeSettingUI() {
            sizeBtnSmall.classList.toggle('active', currentSize === 'small');
            sizeBtnMedium.classList.toggle('active', currentSize === 'medium');
            sizeBtnLarge.classList.toggle('active', currentSize === 'large');
        }

        function updateLangSettingUI() {
            languageSelect.value = currentLang;
        }

        // --- App ç¸½åˆå§‹åŒ– (v28: è¼‰å…¥é‚è¼¯æ›´æ–°) ---
        function initApp() {
            navQuickBtn.onclick = () => showView('quick-actions-view');
            navBuilderBtn.onclick = () => showView('builder-view');

            // 1. è¼‰å…¥è¨­å®š (v28: åŒ…å«èªè¨€)
            const savedSettings = localStorage.getItem(SETTINGS_KEY);
            if (savedSettings) {
                try {
                    const settings = JSON.parse(savedSettings);
                    currentSize = settings.size || 'medium';
                    currentLang = settings.lang || 'zh-TW';
                } catch (e) {
                    console.error("Error parsing settings, resetting:", e);
                    currentSize = 'medium';
                    currentLang = 'zh-TW';
                }
            } else {
                currentSize = 'medium';
                currentLang = 'zh-TW';
            }

            // 2. è¼‰å…¥ "çµ„åˆå¥å­" è‡ªå®šç¾©è³‡æ–™ (v28)
            const savedBuilderData = localStorage.getItem(BUILDER_DATA_KEY);
            let loadedData = {};
            try {
                if (savedBuilderData) {
                    loadedData = JSON.parse(savedBuilderData);
                } else {
                    loadedData = JSON.parse(JSON.stringify(defaultBuilderCategories));
                }
            } catch (e) {
                console.error("Error parsing builder data, resetting:", e);
                loadedData = JSON.parse(JSON.stringify(defaultBuilderCategories));
            }
            
            builderCategories = JSON.parse(JSON.stringify(defaultBuilderCategories));
            
            // v28: ä½¿ç”¨ ID åˆä½µ, ç¢ºä¿é è¨­è©å½™å’Œè‡ªè¨‚è©å½™
            Object.keys(builderCategories).forEach(categoryKey => {
                if (loadedData[categoryKey] && Array.isArray(loadedData[categoryKey].words)) {
                    const defaultWords = builderCategories[categoryKey].words; // é è¨­ (obj array)
                    const loadedWords = loadedData[categoryKey].words;   // å„²å­˜çš„ (obj array)
                    
                    const wordMap = new Map();
                    defaultWords.forEach(w => wordMap.set(w.id, w));
                    // v29.1: åˆä½µæ™‚, ç¢ºä¿èˆŠçš„è‡ªè¨‚è©å½™ä¹Ÿæœ‰ emoji å‚™æ´
                    loadedWords.forEach(w => {
                        if (!w.emoji) {
                            w.emoji = 'ğŸ’¬'; // å¹«èˆŠè³‡æ–™åŠ ä¸Šå‚™æ´ emoji
                        }
                        wordMap.set(w.id, w);
                    });
                    
                    builderCategories[categoryKey].words = Array.from(wordMap.values());
                } else {
                    // v28: å¦‚æœå„²å­˜çš„è³‡æ–™æ ¼å¼ä¸å°, å°±ä½¿ç”¨é è¨­å€¼
                    console.warn(`Category ${categoryKey} data invalid, using default.`);
                }
            });
            localStorage.setItem(BUILDER_DATA_KEY, JSON.stringify(builderCategories));

            // v28: è¼‰å…¥ "ä¸€éµæ±‚åŠ©" è³‡æ–™ (é€™å€‹æ¨¡å¼ä¸å…è¨±è‡ªè¨‚, æ‰€ä»¥ç›´æ¥ç”¨é è¨­)
            quickCategoriesData = JSON.parse(JSON.stringify(quickCategories));

            
            // 3. åˆå§‹åŒ–ä¸» App çš„ä¸‰å€‹æ¨¡å¼
            initQuickActions(); 
            initBuilder(); 
            initSettings(); 
            
            // 4. é è¨­é¡¯ç¤ºã€Œä¸€éµæ±‚åŠ©ã€æ¨¡å¼
            showView('quick-actions-view');
        }

        // å•Ÿå‹• App
        // v28: å»¶é²ä¸€é»å•Ÿå‹•, ç¢ºä¿èªéŸ³å¼•æ“æœ‰æ™‚é–“è¼‰å…¥
        setTimeout(initApp, 100);

    </script>
</body>
</html>

